// Activate (true) or deactivate debug output
var debug = false;

// Run App
$(document).ready(function () {
    initCalculator();
});

// Globals
var gauge;
var score = 0;
var scores = Array();
var recommendation;

var MIN_SCORE = 5;
var MAX_SCORE = 15;

// Felder
var BewerberProStelle,
    AnteilInterview,
    AnteilStellenangebot,
    AnteilAnstellung,
    ZeitBisAnstellung;


// Read values from fields
function readValues() {
    BewerberProStelle = parseInt($('.BewerberProStelle').val());
    AnteilInterview = parseInt($('.AnteilInterview').val());
    AnteilStellenangebot = parseInt($('.AnteilStellenangebot').val());
    AnteilAnstellung = parseInt($('.AnteilAnstellung').val());
    ZeitBisAnstellung = parseInt($('.ZeitBisAnstellung').val());
}


// Update Results
function updateResults() {
    // Read values
    readValues();

    // Update scores
    var value = parseInt($('.step:eq(0) input').val());
    if (value <= 25) {
        scores[0] = 1;
    } else if (value >= 49) {
        scores[0] = 3;
    } else {
        scores[0] = 2;
    }

    value = parseInt($('.step:eq(1) input').val());
    if (value <= 6) {
        scores[1] = 1;
    } else if (value >= 10) {
        scores[1] = 3;
    } else {
        scores[1] = 2;
    }

    value = parseInt($('.step:eq(2) input').val());
    if (value <= 11) {
        scores[2] = 1;
    } else if (value >= 21) {
        scores[2] = 3;
    } else {
        scores[2] = 2;
    }

    value = parseInt($('.step:eq(3) input').val());
    if (value <= 46) {
        scores[3] = 1;
    } else if (value >= 91) {
        scores[3] = 3;
    } else {
        scores[3] = 2;
    }

    value = parseInt($('.step:eq(4) input').val());
    if (value >= 60) {
        scores[4] = 1;
    } else if (value <= 41) {
        scores[4] = 3;
    } else {
        scores[4] = 2;
    }

    score = 0;
    for (i = 0; i < scores.length; i++) {
        score += scores[i];
    }

    // Update barometer
    updateBarometer();
}


// Prozess text input field "Anzahl Mitarbeiter"
function processAnzahlMitarbeiter(form) {
    var value = $(form).find('input').val();
    value = value.replace('.', '');
    value = parseInt(value);
    var maxRange = $('.AnzahlMitarbeiter').attr('max');
    if (value > maxRange) {
        $('.AnzahlMitarbeiter').attr('max', value).rangeslider('update', true);
    }
    $('.AnzahlMitarbeiter').val(value).change();
    updateResults();
}


// Initialize calculator
function initCalculator() {

    gauge = new JustGage({
        id: "gauge",
        value: 12,
        min: 0,
        symbol: '%',
        max: 100,
        title: "",
        levelColors: ['#BF360C', '#FDD835', '#8BC34A'],
        valueFontColor: "#1FA7F6",
        labelFontColor: "#1FA7F6",
        noGradient: true,
        hideMinMax: true
    });

    initSliders();

    updateResults();

    if (debug) {
        $('main').append('<iframe class="preview-pane" type="application/pdf" width="100%" height="650" frameborder="0" src=""></iframe>');
    }

    $('.showResults').on('click', function () {
        showResults();
    });
}


function initSliders() {
    $('.calculator .rangeslider').rangeslider({

        polyfill: false,

        // Default CSS classes
        rangeClass: 'rangeslider',
        fillClass: 'rangeslider__fill',
        handleClass: 'rangeslider__handle',

        // Callback function
        onInit: function () {
        },

        // Callback function
        onSlide: function (position, value) {
            updateResults();
        },

        // Callback function
        onSlideEnd: function (position, value) {
        }

    }).on('input', function () {
        enableNextStep(this);
        var valueField = $(this).closest('.step').find('.value');
        if (valueField.is('input')) {
            valueField.val(addThousandSeperator(this.value.replace(".", ",")));
        } else {
            valueField.text(addThousandSeperator(this.value.replace(".", ",")));
        }
    });
}


function enableNextStep(actualSlider) {
    var indexActualStep = parseInt($(actualSlider).closest('.step').index());
    var nextStep = $('.step:eq(' + (indexActualStep + 1) + ')');
    if ($(nextStep).length > 0) {
        $(nextStep).removeClass('disabled');
        $(nextStep).find('input').removeAttr('disabled').rangeslider('update', true);
    }
    if ($('.step.disabled').length === 0) {
        $('.showResults').removeAttr('disabled');
    }
}


// Updates stack
function updateBarometer() {
    var percent = (score - MIN_SCORE) / (MAX_SCORE - MIN_SCORE) * 100;
    percent = Math.round(percent);
    gauge.refresh(percent);
}

function showResults() {
    $('.showResults').hide();

    $('.step .result p').hide();
    $('.step').each(function (index) {
        var resultText = $(this).find('.result p:eq(' + (scores[index] - 1) + ')');
        $(resultText).addClass('active');
    });

    recommendation = 0;
    if (score <= 8) {
        recommendation = 1;
    } else if (score >= 13) {
        recommendation = 3;
    } else {
        recommendation = 2;
    }
    $('.recommendation p').hide();
    $('.recommendation p:eq(' + (recommendation - 1) + ')').removeClass('hidden').show();
    $('.newsletter-form').removeClass('hidden');

    $('.recommendation').removeClass('hidden');
    $('.greybox').removeClass('greybox--transparent');
    $('.calculator input.rangeslider').each(function () {
        $(this).attr('disabled', 'disabled').rangeslider('update', true);
    });

}


// Adds leading zeros to int; returns string
function leadingZeros(num, size) {
    var s = num + "";
    while (s.length < size) {
        s = "0" + s;
    }
    return s;
}

function addThousandSeperator(n) {
    var rx = /(\d+)(\d{3})/;
    return String(n).replace(/^\d+/, function (w) {
        while (rx.test(w)) {
            w = w.replace(rx, '$1.$2');
        }
        return w;
    });
}

function blueText(doc) {
    doc.setTextColor(31, 167, 246);
}

function blackText(doc) {
    doc.setTextColor(0);
}

// Generates PDF and sends it to Browser for downloading
function generatePdf() {

    var doc = new jsPDF('p', 'pt', 'a4'); // portrait, points, DIN A4

    var marginLeft = 40;
    var marginLeft2ndColumn = 400;

    var currentLinePostition = 0;

    var rightBorder = 550;

    var haufeLogo = 'data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMtaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUuMSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkQzMEU5M0Q0RkM1MTFFNTlCOTFEM0Y4ODlGQkM3MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkQzMEU5M0U0RkM1MTFFNTlCOTFEM0Y4ODlGQkM3MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRDMwRTkzQjRGQzUxMUU1OUI5MUQzRjg4OUZCQzcxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyRDMwRTkzQzRGQzUxMUU1OUI5MUQzRjg4OUZCQzcxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0Ig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';
    var umantisLogo = 'data:image/jpeg;base64,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';

    doc.addImage(haufeLogo, 'JPEG', 40, 40, 140, 15);
    doc.addImage(umantisLogo, 'JPEG', 392, 30, 165, 40);


    doc.setDrawColor(220, 220, 220);
    doc.setFont('helvetica');
    doc.setFontType("normal");

    currentLinePostition += 90;

    doc.setFontSize(20);
    doc.text(marginLeft, currentLinePostition, 'Ihre aktuelle Recruiting Performance');

    currentLinePostition += 10;

    doc.setFontType('normal');
    doc.setFontSize(10);

    currentLinePostition += 16;
    blueText(doc);
    doc.setFontType('bold');
    var lines = doc.splitTextToSize($('.step:eq(0)').find('.question strong').text().trim(), marginLeft2ndColumn - marginLeft * 3);
    doc.text(marginLeft, currentLinePostition, lines);
    doc.text(marginLeft2ndColumn, currentLinePostition, $('.step:eq(0)').find('.value').parent('div').text().trim());

    currentLinePostition += lines.length * 10 + 12;
    blackText(doc);
    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.step:eq(0)').find('.result p.active').text().trim(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 10 + 8;

    doc.line(marginLeft, currentLinePostition, rightBorder, currentLinePostition);


    currentLinePostition += 22;
    blueText(doc);
    doc.setFontType('bold');
    lines = doc.splitTextToSize($('.step:eq(1)').find('.question strong').text().trim(), marginLeft2ndColumn - marginLeft * 3);
    doc.text(marginLeft, currentLinePostition, lines);
    doc.text(marginLeft2ndColumn, currentLinePostition, $('.step:eq(1)').find('.value').parent('div').text().trim());

    currentLinePostition += lines.length * 10 + 12;
    blackText(doc);
    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.step:eq(1)').find('.result p.active').text().trim(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 10 + 8;

    doc.line(marginLeft, currentLinePostition, rightBorder, currentLinePostition);


    currentLinePostition += 22;
    blueText(doc);
    doc.setFontType('bold');
    lines = doc.splitTextToSize($('.step:eq(2)').find('.question strong').text().trim(), marginLeft2ndColumn - marginLeft * 3);
    doc.text(marginLeft, currentLinePostition, lines);
    doc.text(marginLeft2ndColumn, currentLinePostition, $('.step:eq(2)').find('.value').parent('div').text().trim());

    currentLinePostition += lines.length * 10 + 12;
    blackText(doc);
    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.step:eq(2)').find('.result p.active').text().trim(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 10 + 8;

    doc.line(marginLeft, currentLinePostition, rightBorder, currentLinePostition);


    currentLinePostition += 22;
    blueText(doc);
    doc.setFontType('bold');
    lines = doc.splitTextToSize($('.step:eq(3)').find('.question strong').text().trim(), marginLeft2ndColumn - marginLeft * 3);
    doc.text(marginLeft, currentLinePostition, lines);
    doc.text(marginLeft2ndColumn, currentLinePostition, $('.step:eq(3)').find('.value').parent('div').text().trim());

    currentLinePostition += lines.length * 10 + 12;
    blackText(doc);
    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.step:eq(3)').find('.result p.active').text().trim(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 10 + 8;

    doc.line(marginLeft, currentLinePostition, rightBorder, currentLinePostition);


    currentLinePostition += 22;
    blueText(doc);
    doc.setFontType('bold');
    lines = doc.splitTextToSize($('.step:eq(4)').find('.question strong').text().trim(), marginLeft2ndColumn - marginLeft * 3);
    doc.text(marginLeft, currentLinePostition, lines);
    doc.text(marginLeft2ndColumn, currentLinePostition, $('.step:eq(4)').find('.value').parent('div').text().trim());

    currentLinePostition += lines.length * 10 + 12;
    blackText(doc);
    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.step:eq(4)').find('.result p.active').text().trim(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 10 + 8;

    doc.line(marginLeft, currentLinePostition, rightBorder, currentLinePostition);


    currentLinePostition += 40;

    doc.setFontType("normal");
    doc.setFontSize(20);
    doc.text(marginLeft, currentLinePostition, 'Ihre Recruiting Performance');


    currentLinePostition += 30;

    doc.setFontSize(10);
    doc.setFontType('bold');

    lines = doc.splitTextToSize($('.recommendation p:eq(' + (recommendation - 1) + ') strong').text(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 12 + 12;

    doc.setFontType('normal');
    lines = doc.splitTextToSize($('.recommendation p:eq(' + (recommendation - 1) + ') span').text(), rightBorder - marginLeft);
    doc.text(marginLeft, currentLinePostition, lines);
    currentLinePostition += lines.length * 12 + 12;

    currentLinePostition += 20;

    doc.setFontSize(12);
    doc.setFontType("bold");
    doc.text(marginLeft, currentLinePostition, 'Jetzt informieren');
    doc.setFontType("normal");
    doc.text(marginLeft + 100, currentLinePostition, 'und die');

    currentLinePostition += 15;
    doc.text(marginLeft, currentLinePostition, 'Effizienz Ihres Recruiting-Prozesses steigern!');


    currentLinePostition -= 15;
    doc.setFontType("bold");
    doc.text(marginLeft2ndColumn - 50, currentLinePostition, 'Internet: talentmanagement.haufe.de');
    currentLinePostition += 15;
    doc.text(marginLeft2ndColumn - 50, currentLinePostition, 'E-Mail: talentmanagement@haufe.de');
    currentLinePostition += 15;
    doc.text(marginLeft2ndColumn - 50, currentLinePostition, 'Telefon: 089 1222 873 89');

    if (debug) {
        var string = doc.output('datauristring');
        $('.preview-pane').attr('src', string);
    } else {
        doc.save('Haufe-Recruiting-Barometer.pdf');
    }
}

function onSubmitSuccess(event) {
    // hide form
    $('.newsletter-form').addClass('hidden');
    // show success message
    $('.newsletter-result').removeClass('hidden');
}

function onFormSubmit(event) {
    // if validation failed do nothing
    if (event.isDefaultPrevented()) {
        return;
    }

    // if validation has passed
    // read HR values
    readValues();

    // get redirect url
    var form = $(event.target);
    var redirectUrlInput = form.find('[name="redirectURL"]');
    var redirectUrl = redirectUrlInput.val();

    // add values to redirect url
    redirectUrl = updateQueryParameter(redirectUrl, 'BewerberProStelle', BewerberProStelle);
    redirectUrl = updateQueryParameter(redirectUrl, 'AnteilInterview', AnteilInterview);
    redirectUrl = updateQueryParameter(redirectUrl, 'AnteilStellenangebot', AnteilStellenangebot);
    redirectUrl = updateQueryParameter(redirectUrl, 'AnteilAnstellung', AnteilAnstellung);
    redirectUrl = updateQueryParameter(redirectUrl, 'ZeitBisAnstellung', ZeitBisAnstellung);

    // update field
    redirectUrlInput.val(redirectUrl);

    // call onSubmitSuccess
    onSubmitSuccess(event);
}

function setValuesFromURL() {
    var url = window.location.href,
        _BewerberProStelle = getQueryParameter('BewerberProStelle', url) || "1",
        _AnteilInterview = getQueryParameter('AnteilInterview', url) || "1",
        _AnteilStellenangebot = getQueryParameter('AnteilStellenangebot', url) || "1",
        _AnteilAnstellung = getQueryParameter('AnteilAnstellung', url) || "1",
        _ZeitBisAnstellung = getQueryParameter('ZeitBisAnstellung', url) || "1";

    $('.BewerberProStelle').val(_BewerberProStelle);
    $('.AnteilInterview').val(_AnteilInterview);
    $('.AnteilStellenangebot').val(_AnteilStellenangebot);
    $('.AnteilAnstellung').val(_AnteilAnstellung);
    $('.ZeitBisAnstellung').val(_ZeitBisAnstellung);

    $('.calculator .rangeslider').trigger('input');
}

function onDownloadClick(event) {
    // if prevented do nothing
    if (event.isDefaultPrevented()) {
        return;
    }

    // prevent default
    event.preventDefault();

    doBlindFormSubmit(event);
    generatePdf();
}

function doBlindFormSubmit(event) {
    // set url
    var url = $(event.target).attr('href');

    // do nothing if no url
    if (!url) {
        return;
    }

    // create iframe
    var iframe = $(document.createElement('iframe'))
        .css('height', '0px')
        .attr('frameborder', '0')
        .attr('src', url);

    // append to body
    iframe.appendTo('body');
}

/* ---------------------------------------------------------------------------------------------------------------------
 *        URL HELPER FUNC
 * ------------------------------------------------------------------------------------------------------------------ */

function getQueryParameter(name, url) {
    name = name.replace(/[\[\]]/g, "\\$&");

    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);

    if (!results) return null;
    if (!results[2]) return '';

    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

function updateQueryParameter(url, name, value) {
    // escape name
    name = name.replace(/[\[\]]/g, "\\$&");
    // set default value to null
    value = typeof value === "undefined" ? null : value;

    var encodedValue = encodeURIComponent(value),
        regex = new RegExp("([?&]" + name + ")(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);

    if (results && value !== null) {
        // update param
        return url.replace(regex, '$1=' + encodedValue);
    } else if (value !== null) {
        // add param to end
        return url + (/\?/.test(url) ? '&' : '?') + name + '=' + encodedValue;
    } else {
        // remove param from url
        return url.replace(regex, '');
    }
}